name       : python-pyproj
version    : 1.9.5.1
release    : 1
source     :
    - https://github.com/jswhit/pyproj/archive/v1.9.5.1rel.tar.gz : 0e19f02ebbf4c253813142ffe06e12489f3861877c3fab75b6c769c1a1960cac
license    : ISC
component  : programming.python
summary    : Python interface to PROJ.4 library for cartographic transformations
description: |
    Cython wrapper to provide python interfaces to Proj.
    Performs cartographic transformations between geographic (Lat/Lon)
    and map projection (x/y) coordinates. Can also transform directly
    from one map projection coordinate system to another.
    Coordinates can be given as numpy arrays, python arrays, lists or scalars.
    Optimized for numpy arrays.
builddeps  :
    - pkgconfig(proj)
    - pkgconfig(python-3.5)
    - python-setuptools
setup      : |
    # Remove RPATH
    sed -i "s/runtime_library_dirs=libdirs,//" setup.py

    cp -a . ../py3build
    mv $PWD ${PWD%/*}/py2build
build      : |
    export PROJ_DIR=/usr

    pushd py2build
    CFLAGS="$CFLAGS" %python_setup
    popd

    pushd py3build
    CFLAGS="$CFLAGS" %python3_setup
    popd
install    : |
    export PROJ_DIR=/usr

    pushd py2build
    %python_install --skip-build
    popd

    pushd py3build
    %python3_install --skip-build
    popd
